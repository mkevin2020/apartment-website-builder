module.exports=[5522,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},92e3,a=>{"use strict";let b=(0,a.i(70106).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},20005,a=>{"use strict";let b=(0,a.i(70106).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);a.s(["LogOut",()=>b],20005)},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},70106,a=>{"use strict";var b=a.i(72131);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],70106)},62213,a=>{"use strict";let b=(0,a.i(70106).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["default",()=>b])},72692,33508,a=>{"use strict";let b=(0,a.i(70106).default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);a.s(["Menu",()=>b],72692);var c=a.i(62213);a.s(["X",()=>c.default],33508)},51513,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(40695),e=a.i(20005),f=a.i(72692),g=a.i(33508),h=a.i(72131),i=a.i(38246);function j({tenant:a}){let j=(0,c.useRouter)(),[k,l]=(0,h.useState)(!1),m=()=>{localStorage.removeItem("tenant_session"),j.push("/login"),j.refresh()};return(0,b.jsx)("header",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)(i.default,{href:"/tenant/dashboard",className:"font-bold text-xl",children:"Cielo Vista Apartments"}),(0,b.jsxs)("nav",{className:"hidden md:flex gap-6",children:[(0,b.jsx)(i.default,{href:"/tenant/dashboard",className:"hover:opacity-80",children:"Dashboard"}),(0,b.jsx)(i.default,{href:"/tenant/booked-apartments",className:"hover:opacity-80",children:"My Apartments"}),(0,b.jsx)(i.default,{href:"/tenant/profile",className:"hover:opacity-80",children:"Profile"}),(0,b.jsx)(i.default,{href:"/tenant/payment-history",className:"hover:opacity-80",children:"Payments"}),(0,b.jsx)(i.default,{href:"/tenant/maintenance",className:"hover:opacity-80",children:"Maintenance"})]}),(0,b.jsxs)("div",{className:"hidden md:flex items-center gap-4",children:[(0,b.jsx)("span",{className:"text-sm",children:a?.full_name}),(0,b.jsxs)(d.Button,{onClick:m,variant:"outline",className:"text-white border-white hover:bg-white hover:text-blue-600",children:[(0,b.jsx)(e.LogOut,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),(0,b.jsx)("button",{className:"md:hidden",onClick:()=>l(!k),children:k?(0,b.jsx)(g.X,{className:"h-6 w-6"}):(0,b.jsx)(f.Menu,{className:"h-6 w-6"})})]}),k&&(0,b.jsxs)("nav",{className:"md:hidden mt-4 space-y-2 pb-4",children:[(0,b.jsx)(i.default,{href:"/tenant/dashboard",className:"block hover:opacity-80 py-2",children:"Dashboard"}),(0,b.jsx)(i.default,{href:"/tenant/booked-apartments",className:"block hover:opacity-80 py-2",children:"My Apartments"}),(0,b.jsx)(i.default,{href:"/tenant/profile",className:"block hover:opacity-80 py-2",children:"Profile"}),(0,b.jsx)(i.default,{href:"/tenant/payment-history",className:"block hover:opacity-80 py-2",children:"Payments"}),(0,b.jsx)(i.default,{href:"/tenant/maintenance",className:"block hover:opacity-80 py-2",children:"Maintenance"}),(0,b.jsxs)(d.Button,{onClick:m,variant:"outline",className:"w-full text-white border-white hover:bg-white hover:text-blue-600",children:[(0,b.jsx)(e.LogOut,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})})}a.s(["default",()=>j])},24987,a=>{"use strict";let b=(0,a.i(70106).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["MapPin",()=>b],24987)},50778,16286,34044,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);a.s(["Bed",()=>c],50778);let d=(0,b.default)("Bath",[["path",{d:"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"1r8yf5"}],["line",{x1:"10",x2:"8",y1:"5",y2:"7",key:"h5g8z4"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"7",x2:"7",y1:"19",y2:"21",key:"16jp00"}],["line",{x1:"17",x2:"17",y1:"19",y2:"21",key:"1pxrnk"}]]);a.s(["Bath",()=>d],16286);let e=(0,b.default)("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);a.s(["Maximize2",()=>e],34044)},20524,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(35025);var e=a.i(9701),f=a.i(40695),g=a.i(3130),h=a.i(5522),i=a.i(51513),j=a.i(50778),k=a.i(16286),l=a.i(34044),m=a.i(15618),n=a.i(92e3),o=a.i(16201),p=a.i(33508),q=a.i(24987),r=a.i(38246);function s(){let a=(0,d.useRouter)(),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)({apartment_id:0,start_date:"",end_date:""}),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(null),K=(0,e.createBrowserClient)("https://dtwoklcuesipnczgzbxj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0d29rbGN1ZXNpcG5jemd6YnhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5ODU4MDAsImV4cCI6MjA3OTU2MTgwMH0.TSp3ltWMXKd1nBCHsTWg6bIdMRcMTJChUg3CdKXo35Q");(0,c.useEffect)(()=>{(async()=>{try{let b=localStorage.getItem("tenant_session");if(!b)return void a.push("/login");let c=JSON.parse(b);t(c);let{data:d,error:e}=await K.from("apartments").select("*").eq("is_available",!0).order("price_per_month",{ascending:!0});if(e){console.error("Error fetching apartments:",e),z("Failed to load apartments");return}v(d||[])}catch(a){console.error("Error in fetchData:",a),z("Failed to load data")}finally{x(!1)}})()},[a,K]);let L=async b=>{if(!C.start_date||!C.end_date)return void J("Please fill in all booking dates");if(new Date(C.start_date)>=new Date(C.end_date))return void J("End date must be after start date");F(!0),J(null);try{let c=u.find(a=>a.id===b);if(!c)return void J("Apartment not found");let d={tenant_id:s?.id,apartment_id:b,start_date:C.start_date,end_date:C.end_date,status:"pending",client_name:s?.full_name,email:s?.email,phone_number:s?.phone||"",apartment_type:c.name},{data:e,error:f}=await K.from("bookings").insert([d]).select();if(f){console.error("Booking error:",f),f.message?.includes("apartment_id")?J("Database configuration issue: The booking system needs to be initialized. Please contact support."):J(`Failed to book apartment: ${f.message}`);return}if(!e||0===e.length)return void J("Booking failed. Please try again.");H("Apartment booked successfully! Redirecting to your bookings..."),D({apartment_id:0,start_date:"",end_date:""}),B(null),setTimeout(()=>{a.push("/tenant/booked-apartments")},2e3)}catch(a){console.error("Error booking apartment:",a),J("An error occurred while booking the apartment")}finally{F(!1)}};return w?(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)(i.default,{tenant:s}),(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading apartments..."})]})})]}):s?(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)(i.default,{tenant:s}),(0,b.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Available Apartments"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Browse and book from our available apartments"})]}),(0,b.jsx)(f.Button,{asChild:!0,variant:"outline",className:"gap-2",children:(0,b.jsx)(r.default,{href:"/tenant/dashboard",children:"Back to Dashboard"})})]}),y&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[(0,b.jsx)(n.AlertCircle,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),(0,b.jsx)("p",{className:"text-red-900",children:y})]}),G&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-start gap-3",children:[(0,b.jsx)(o.CheckCircle,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),(0,b.jsx)("p",{className:"text-green-900 font-semibold",children:G})]}),u.length>0?(0,b.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(a=>(0,b.jsxs)(g.Card,{className:"overflow-hidden hover:shadow-lg transition-all flex flex-col",children:[(0,b.jsx)("div",{className:"relative h-56 w-full bg-gradient-to-br from-blue-100 to-blue-50 flex items-center justify-center overflow-hidden",children:a.image_url?(0,b.jsx)("img",{src:a.image_url,alt:a.name,className:"w-full h-full object-cover"}):(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,b.jsx)("div",{className:"h-20 w-20 bg-blue-200 rounded-lg flex items-center justify-center",children:(0,b.jsx)(q.MapPin,{className:"h-10 w-10 text-blue-600"})}),(0,b.jsx)("p",{className:"text-blue-600 font-medium text-sm",children:"Apartment Image"})]})}),(0,b.jsxs)(g.CardHeader,{className:"pb-3",children:[(0,b.jsx)(g.CardTitle,{className:"text-xl",children:a.name}),a.unit_number&&(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Unit: ",a.unit_number]}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-blue-600 mt-2",children:["$",a.price_per_month||a.monthly_rent,"/month"]})]}),(0,b.jsxs)(g.CardContent,{className:"space-y-4 flex-grow flex flex-col",children:[(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[a.bedrooms&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-blue-50 rounded",children:[(0,b.jsx)(j.Bed,{className:"h-4 w-4 text-blue-600"}),(0,b.jsxs)("span",{className:"text-sm font-medium",children:[a.bedrooms," BR"]})]}),a.bathrooms&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-blue-50 rounded",children:[(0,b.jsx)(k.Bath,{className:"h-4 w-4 text-blue-600"}),(0,b.jsxs)("span",{className:"text-sm font-medium",children:[a.bathrooms," BA"]})]}),(a.size||a.size_sqm)&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-blue-50 rounded",children:[(0,b.jsx)(l.Maximize2,{className:"h-4 w-4 text-blue-600"}),(0,b.jsxs)("span",{className:"text-sm font-medium",children:[a.size||a.size_sqm," sqm"]})]})]}),a.description&&(0,b.jsx)("p",{className:"text-sm text-gray-600 line-clamp-3",children:a.description}),A===a.id?(0,b.jsxs)("div",{className:"mt-auto pt-4 space-y-3 border-t",children:[I&&(0,b.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-sm text-red-700",children:I}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Move-in Date"}),(0,b.jsx)(h.Input,{type:"date",value:C.start_date,onChange:a=>D({...C,start_date:a.target.value}),className:"w-full"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Move-out Date"}),(0,b.jsx)(h.Input,{type:"date",value:C.end_date,onChange:a=>D({...C,end_date:a.target.value}),className:"w-full"})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,b.jsx)(f.Button,{onClick:()=>L(a.id),disabled:E,className:"flex-1 bg-green-600 hover:bg-green-700",children:E?"Booking...":"Confirm"}),(0,b.jsx)(f.Button,{onClick:()=>{B(null),J(null)},variant:"outline",className:"flex-1",children:(0,b.jsx)(p.X,{className:"h-4 w-4"})})]})]}):(0,b.jsxs)(f.Button,{onClick:()=>{B(a.id),D({apartment_id:a.id,start_date:"",end_date:""})},className:"mt-auto w-full gap-2 bg-blue-600 hover:bg-blue-700",children:[(0,b.jsx)(m.Plus,{className:"h-4 w-4"}),"Book Now"]})]})]},a.id))}):(0,b.jsx)(g.Card,{children:(0,b.jsxs)(g.CardContent,{className:"pt-12 text-center pb-12",children:[(0,b.jsx)(n.AlertCircle,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-gray-600 text-lg mb-4",children:"No apartments available at the moment"}),(0,b.jsx)(f.Button,{asChild:!0,children:(0,b.jsx)(r.default,{href:"/tenant/dashboard",children:"Back to Dashboard"})})]})})]})]}):null}a.s(["default",()=>s])}];

//# sourceMappingURL=_b23b672d._.js.map