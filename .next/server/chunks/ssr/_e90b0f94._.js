module.exports=[38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},16201,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},92e3,a=>{"use strict";let b=(0,a.i(70106).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},20005,a=>{"use strict";let b=(0,a.i(70106).default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);a.s(["LogOut",()=>b],20005)},70106,a=>{"use strict";var b=a.i(72131);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],70106)},62213,a=>{"use strict";let b=(0,a.i(70106).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["default",()=>b])},72692,33508,a=>{"use strict";let b=(0,a.i(70106).default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);a.s(["Menu",()=>b],72692);var c=a.i(62213);a.s(["X",()=>c.default],33508)},51513,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(40695),e=a.i(20005),f=a.i(72692),g=a.i(33508),h=a.i(72131),i=a.i(38246);function j({tenant:a}){let j=(0,c.useRouter)(),[k,l]=(0,h.useState)(!1),m=()=>{localStorage.removeItem("tenant_session"),j.push("/login"),j.refresh()};return(0,b.jsx)("header",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)(i.default,{href:"/tenant/dashboard",className:"font-bold text-xl",children:"Cielo Vista Apartments"}),(0,b.jsxs)("nav",{className:"hidden md:flex gap-6",children:[(0,b.jsx)(i.default,{href:"/tenant/dashboard",className:"hover:opacity-80",children:"Dashboard"}),(0,b.jsx)(i.default,{href:"/tenant/booked-apartments",className:"hover:opacity-80",children:"My Apartments"}),(0,b.jsx)(i.default,{href:"/tenant/profile",className:"hover:opacity-80",children:"Profile"}),(0,b.jsx)(i.default,{href:"/tenant/payment-history",className:"hover:opacity-80",children:"Payments"}),(0,b.jsx)(i.default,{href:"/tenant/maintenance",className:"hover:opacity-80",children:"Maintenance"})]}),(0,b.jsxs)("div",{className:"hidden md:flex items-center gap-4",children:[(0,b.jsx)("span",{className:"text-sm",children:a?.full_name}),(0,b.jsxs)(d.Button,{onClick:m,variant:"outline",className:"text-white border-white hover:bg-white hover:text-blue-600",children:[(0,b.jsx)(e.LogOut,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),(0,b.jsx)("button",{className:"md:hidden",onClick:()=>l(!k),children:k?(0,b.jsx)(g.X,{className:"h-6 w-6"}):(0,b.jsx)(f.Menu,{className:"h-6 w-6"})})]}),k&&(0,b.jsxs)("nav",{className:"md:hidden mt-4 space-y-2 pb-4",children:[(0,b.jsx)(i.default,{href:"/tenant/dashboard",className:"block hover:opacity-80 py-2",children:"Dashboard"}),(0,b.jsx)(i.default,{href:"/tenant/booked-apartments",className:"block hover:opacity-80 py-2",children:"My Apartments"}),(0,b.jsx)(i.default,{href:"/tenant/profile",className:"block hover:opacity-80 py-2",children:"Profile"}),(0,b.jsx)(i.default,{href:"/tenant/payment-history",className:"block hover:opacity-80 py-2",children:"Payments"}),(0,b.jsx)(i.default,{href:"/tenant/maintenance",className:"block hover:opacity-80 py-2",children:"Maintenance"}),(0,b.jsxs)(d.Button,{onClick:m,variant:"outline",className:"w-full text-white border-white hover:bg-white hover:text-blue-600",children:[(0,b.jsx)(e.LogOut,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})})}a.s(["default",()=>j])},7554,a=>{"use strict";function b(a,c,{checkForDefaultPrevented:d=!0}={}){return function(b){if(a?.(b),!1===d||!b.defaultPrevented)return c?.(b)}}a.s(["composeEventHandlers",()=>b])},50104,a=>{"use strict";var b=a.i(72131),c=a.i(87924);function d(a,d){let e=b.createContext(d),f=a=>{let{children:d,...f}=a,g=b.useMemo(()=>f,Object.values(f));return(0,c.jsx)(e.Provider,{value:g,children:d})};return f.displayName=a+"Provider",[f,function(c){let f=b.useContext(e);if(f)return f;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${a}\``)}]}function e(a,d=[]){let f=[],g=()=>{let c=f.map(a=>b.createContext(a));return function(d){let e=d?.[a]||c;return b.useMemo(()=>({[`__scope${a}`]:{...d,[a]:e}}),[d,e])}};return g.scopeName=a,[function(d,e){let g=b.createContext(e),h=f.length;f=[...f,e];let i=d=>{let{scope:e,children:f,...i}=d,j=e?.[a]?.[h]||g,k=b.useMemo(()=>i,Object.values(i));return(0,c.jsx)(j.Provider,{value:k,children:f})};return i.displayName=d+"Provider",[i,function(c,f){let i=f?.[a]?.[h]||g,j=b.useContext(i);if(j)return j;if(void 0!==e)return e;throw Error(`\`${c}\` must be used within \`${d}\``)}]},function(...a){let c=a[0];if(1===a.length)return c;let d=()=>{let d=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let e=d.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return b.useMemo(()=>({[`__scope${c.scopeName}`]:e}),[e])}};return d.scopeName=c.scopeName,d}(g,...d)]}a.s(["createContext",()=>d,"createContextScope",()=>e])},30553,a=>{"use strict";var b=a.i(72131),c=a.i(35112),d=a.i(11011),e=a.i(87924),f=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((a,c)=>{let f=b.forwardRef((a,b)=>{let{asChild:f,...g}=a,h=f?d.Slot:c;return(0,e.jsx)(h,{...g,ref:b})});return f.displayName=`Primitive.${c}`,{...a,[c]:f}},{});function g(a,b){a&&c.flushSync(()=>a.dispatchEvent(b))}a.s(["Primitive",()=>f,"dispatchDiscreteCustomEvent",()=>g])},46872,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef(a);return b.useEffect(()=>{c.current=a}),b.useMemo(()=>(...a)=>c.current?.(...a),[])}a.s(["useCallbackRef",()=>c])},92843,72752,a=>{"use strict";var b=a.i(72131),c=globalThis?.document?b.useLayoutEffect:()=>{};a.s(["useLayoutEffect",()=>c],72752);var d=b["useId".toString()]||(()=>void 0),e=0;function f(a){let[f,g]=b.useState(d());return c(()=>{a||g(a=>a??String(e++))},[a]),a||(f?`radix-${f}`:"")}a.s(["useId",()=>f],92843)},25152,a=>{"use strict";var b=a.i(72131),c=a.i(46872);function d({prop:a,defaultProp:d,onChange:e=()=>{}}){let[f,g]=function({defaultProp:a,onChange:d}){let e=b.useState(a),[f]=e,g=b.useRef(f),h=(0,c.useCallbackRef)(d);return b.useEffect(()=>{g.current!==f&&(h(f),g.current=f)},[f,g,h]),e}({defaultProp:d,onChange:e}),h=void 0!==a,i=h?a:f,j=(0,c.useCallbackRef)(e);return[i,b.useCallback(b=>{if(h){let c="function"==typeof b?b(a):b;c!==a&&j(c)}else g(b)},[h,a,g,j])]}a.s(["useControllableState",()=>d])},37738,7827,a=>{"use strict";var b=a.i(72131),c=a.i(50104),d=a.i(70121),e=a.i(11011),f=a.i(87924);function g(a){let g=a+"CollectionProvider",[h,i]=(0,c.createContextScope)(g),[j,k]=h(g,{collectionRef:{current:null},itemMap:new Map}),l=a=>{let{scope:c,children:d}=a,e=b.default.useRef(null),g=b.default.useRef(new Map).current;return(0,f.jsx)(j,{scope:c,itemMap:g,collectionRef:e,children:d})};l.displayName=g;let m=a+"CollectionSlot",n=b.default.forwardRef((a,b)=>{let{scope:c,children:g}=a,h=k(m,c),i=(0,d.useComposedRefs)(b,h.collectionRef);return(0,f.jsx)(e.Slot,{ref:i,children:g})});n.displayName=m;let o=a+"CollectionItemSlot",p="data-radix-collection-item",q=b.default.forwardRef((a,c)=>{let{scope:g,children:h,...i}=a,j=b.default.useRef(null),l=(0,d.useComposedRefs)(c,j),m=k(o,g);return b.default.useEffect(()=>(m.itemMap.set(j,{ref:j,...i}),()=>void m.itemMap.delete(j))),(0,f.jsx)(e.Slot,{...{[p]:""},ref:l,children:h})});return q.displayName=o,[{Provider:l,Slot:n,ItemSlot:q},function(c){let d=k(a+"CollectionConsumer",c);return b.default.useCallback(()=>{let a=d.collectionRef.current;if(!a)return[];let b=Array.from(a.querySelectorAll(`[${p}]`));return Array.from(d.itemMap.values()).sort((a,c)=>b.indexOf(a.ref.current)-b.indexOf(c.ref.current))},[d.collectionRef,d.itemMap])},i]}a.s(["createCollection",()=>g],37738);var h=b.createContext(void 0);function i(a){let c=b.useContext(h);return a||c||"ltr"}a.s(["useDirection",()=>i],7827)},79808,a=>{"use strict";let b=(0,a.i(70106).default)("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);a.s(["Wrench",()=>b],79808)},82908,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(35025);var e=a.i(9701),f=a.i(51513),g=a.i(40695),h=a.i(97895);function i({className:a,...c}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,h.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...c})}var j=a.i(3130),k=a.i(87682),l=a.i(79808),m=a.i(92e3),n=a.i(16201);let o=["Plumbing","Electrical","HVAC","Appliance","Flooring","Paint","Door/Lock","Window","Other"],p=["low","normal","high","emergency"];function q(){let a=(0,d.useRouter)(),[h,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)({type:"",text:""}),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)({issue_type:"",description:"",priority:"normal"}),z=(0,e.createBrowserClient)("https://dtwoklcuesipnczgzbxj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0d29rbGN1ZXNpcG5jemd6YnhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5ODU4MDAsImV4cCI6MjA3OTU2MTgwMH0.TSp3ltWMXKd1nBCHsTWg6bIdMRcMTJChUg3CdKXo35Q");(0,c.useEffect)(()=>{let b=localStorage.getItem("tenant_session");if(!b)return void a.push("/login");let c=JSON.parse(b);q(c),A(c.id)},[a]);let A=async a=>{let{data:b}=await z.from("maintenance_requests").select("*").eq("tenant_id",a).order("created_at",{ascending:!1});b&&w(b)},B=async a=>{a.preventDefault(),s(!0),u({type:"",text:""});try{let{error:a}=await z.from("maintenance_requests").insert([{tenant_id:h.id,apartment_id:h.apartment_id,issue_type:x.issue_type,description:x.description,priority:x.priority,status:"pending"}]);if(a)throw a;let b=`[MAINTENANCE REQUEST] ${h.full_name} submitted a maintenance request:

Type: ${x.issue_type}
Priority: ${x.priority}
Description: ${x.description}`,{error:c}=await z.from("client_feedback").insert([{name:h.full_name,email:h.email,message:b,is_read:!1}]);c&&console.error("Error sending notification:",c),u({type:"success",text:"Maintenance request submitted successfully! Admins and employees have been notified."}),y({issue_type:"",description:"",priority:"normal"}),await A(h.id),setTimeout(()=>u({type:"",text:""}),3e3)}catch(a){u({type:"error",text:"Failed to submit request"})}finally{s(!1)}};return h?(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)(f.default,{tenant:h}),(0,b.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold mb-8 flex items-center gap-2",children:[(0,b.jsx)(l.Wrench,{className:"h-8 w-8"}),"Maintenance Requests"]}),(0,b.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsxs)(j.Card,{children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsx)(j.CardTitle,{children:"Submit Request"})}),(0,b.jsxs)(j.CardContent,{children:[t.text&&(0,b.jsxs)("div",{className:`flex items-center gap-2 p-3 rounded-lg mb-4 text-sm ${"success"===t.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:["success"===t.type?(0,b.jsx)(n.CheckCircle,{className:"h-4 w-4"}):(0,b.jsx)(m.AlertCircle,{className:"h-4 w-4"}),t.text]}),(0,b.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Issue Type"}),(0,b.jsxs)(k.Select,{value:x.issue_type,onValueChange:a=>y({...x,issue_type:a}),disabled:r,children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Select issue type"})}),(0,b.jsx)(k.SelectContent,{children:o.map(a=>(0,b.jsx)(k.SelectItem,{value:a,children:a},a))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Priority"}),(0,b.jsxs)(k.Select,{value:x.priority,onValueChange:a=>y({...x,priority:a}),disabled:r,children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsx)(k.SelectContent,{children:p.map(a=>(0,b.jsx)(k.SelectItem,{value:a,children:a.charAt(0).toUpperCase()+a.slice(1)},a))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Description"}),(0,b.jsx)(i,{value:x.description,onChange:a=>y({...x,description:a.target.value}),disabled:r,placeholder:"Describe the issue...",rows:4,required:!0})]}),(0,b.jsx)(g.Button,{type:"submit",className:"w-full",disabled:r,children:r?"Submitting...":"Submit Request"})]})]})]})}),(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsxs)(j.Card,{children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsx)(j.CardTitle,{children:"Your Requests"})}),(0,b.jsx)(j.CardContent,{children:0===v.length?(0,b.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No maintenance requests yet"}):(0,b.jsx)("div",{className:"space-y-4",children:v.map(a=>(0,b.jsxs)("div",{className:"border rounded-lg p-4 hover:shadow-md transition",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,b.jsx)("h3",{className:"font-semibold",children:a.issue_type}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("span",{className:`text-xs font-semibold px-2 py-1 rounded ${(a=>{switch(a){case"emergency":return"text-red-600";case"high":return"text-orange-600";case"normal":return"text-blue-600";default:return"text-gray-600"}})(a.priority)} bg-opacity-10`,children:a.priority.toUpperCase()}),(0,b.jsx)("span",{className:`text-xs font-semibold px-2 py-1 rounded ${(a=>{switch(a){case"completed":return"text-green-600 bg-green-50";case"in-progress":return"text-blue-600 bg-blue-50";case"pending":return"text-yellow-600 bg-yellow-50";default:return"text-gray-600 bg-gray-50"}})(a.status)}`,children:a.status.toUpperCase()})]})]}),(0,b.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:a.description}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:new Date(a.created_at).toLocaleDateString()})]},a.id))})})]})})]})]})]}):null}a.s(["default",()=>q],82908)}];

//# sourceMappingURL=_e90b0f94._.js.map