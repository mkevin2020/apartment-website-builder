module.exports=[5522,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},92e3,a=>{"use strict";let b=(0,a.i(70106).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},70106,a=>{"use strict";var b=a.i(72131);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],70106)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},18414,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(35025);var e=a.i(9701),f=a.i(40695),g=a.i(5522),h=a.i(3130),i=a.i(92e3),j=a.i(16201);let k=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var l=a.i(38246);function m(){let a=(0,d.useRouter)(),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(1),[u,v]=(0,c.useState)({username:"",full_name:"",email:"",password:"",confirm_password:"",phone:"",id_number:"",emergency_contact:"",emergency_contact_phone:"",address:"",city:"",country:""}),w=(0,e.createBrowserClient)("https://dtwoklcuesipnczgzbxj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR0d29rbGN1ZXNpcG5jemd6YnhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5ODU4MDAsImV4cCI6MjA3OTU2MTgwMH0.TSp3ltWMXKd1nBCHsTWg6bIdMRcMTJChUg3CdKXo35Q"),x=a=>{let{name:b,value:c}=a.target;v(a=>({...a,[b]:c}))},y=async b=>{b.preventDefault(),p(""),n(!0);try{if(!(u.address.trim()?u.city.trim()?!!u.country.trim()||(p("Country is required"),!1):(p("City is required"),!1):(p("Address is required"),!1)))return void n(!1);let{data:b,error:c}=await w.from("tenants").select("id").eq("username",u.username);if(c){p(`Registration failed: ${c.message}`),n(!1);return}if(b&&b.length>0){p("This username is already taken"),n(!1);return}let{data:d,error:e}=await w.from("tenants").select("id").eq("email",u.email);if(e){p(`Registration failed: ${e.message}`),n(!1);return}if(d&&d.length>0){p("This email is already registered"),n(!1);return}let{data:f,error:g}=await w.from("tenants").select("id").eq("id_number",u.id_number);if(g){p(`Registration failed: ${g.message}`),n(!1);return}if(f&&f.length>0){p("This ID number is already registered"),n(!1);return}let{data:h,error:i}=await w.from("tenants").insert([{username:u.username,full_name:u.full_name,email:u.email,password:u.password,phone:u.phone,id_number:u.id_number,emergency_contact:u.emergency_contact,emergency_contact_phone:u.emergency_contact_phone,address:u.address,city:u.city,country:u.country,approval_status:"pending",is_active:!1}]).select();if(i){console.error("❌ Registration error:",i),p(`Registration failed: ${i.message}`),n(!1);return}if(!h||0===h.length){p("Failed to create account. Please try again."),n(!1);return}console.log("✅ Tenant registration successful!"),r(!0),setTimeout(()=>{a.push("/login")},3e3)}catch(a){console.error("❌ Registration error:",a),p("An unexpected error occurred"),n(!1)}};return q?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-green-100 p-4",children:(0,b.jsx)(h.Card,{className:"w-full max-w-md shadow-xl border-0",children:(0,b.jsxs)(h.CardContent,{className:"pt-12 text-center",children:[(0,b.jsx)("div",{className:"mb-6 flex justify-center",children:(0,b.jsx)(j.CheckCircle,{className:"h-16 w-16 text-green-600"})}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Registration Successful!"}),(0,b.jsx)("p",{className:"text-gray-600 mb-2",children:"Your account has been created and is pending admin approval."}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"We will notify you via email once your account is approved."}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:"Redirecting to login..."})]})})}):(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-green-100 p-4 py-8",children:(0,b.jsxs)(h.Card,{className:"w-full max-w-md shadow-xl border-0",children:[(0,b.jsxs)(h.CardHeader,{className:"bg-gradient-to-r from-green-600 to-green-800 text-white rounded-t-lg pb-6",children:[(0,b.jsx)(h.CardTitle,{className:"text-2xl",children:"Tenant Registration"}),(0,b.jsxs)("p",{className:"text-green-100 text-sm mt-2",children:["Create your account - Step ",s," of 3"]})]}),(0,b.jsxs)(h.CardContent,{className:"pt-6",children:[o&&(0,b.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex gap-2",children:[(0,b.jsx)(i.AlertCircle,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,b.jsx)("p",{className:"text-red-700 text-sm",children:o})]}),(0,b.jsxs)("form",{onSubmit:3===s?y:a=>{a.preventDefault(),p(""),1!==s||(u.username.trim()?u.username.length<3?(p("Username must be at least 3 characters"),1):u.full_name.trim()?u.email.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.email)?!u.password||u.password.length<6?(p("Password must be at least 6 characters"),1):u.password!==u.confirm_password?(p("Passwords do not match"),1):0:(p("Valid email is required"),1):(p("Full name is required"),1):(p("Username is required"),1))?2!==s||(u.phone.trim()?u.id_number.trim()?u.emergency_contact.trim()?!u.emergency_contact_phone.trim()&&(p("Emergency contact phone is required"),1):(p("Emergency contact name is required"),1):(p("ID number is required"),1):(p("Phone number is required"),1))||t(3):t(2)},className:"space-y-4",children:[1===s&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Username"}),(0,b.jsx)(g.Input,{type:"text",name:"username",value:u.username,onChange:x,placeholder:"Choose a username",disabled:m,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Full Name"}),(0,b.jsx)(g.Input,{type:"text",name:"full_name",value:u.full_name,onChange:x,placeholder:"Enter your full name",disabled:m,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Email Address"}),(0,b.jsx)(g.Input,{type:"email",name:"email",value:u.email,onChange:x,placeholder:"Enter your email",disabled:m,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Password"}),(0,b.jsx)(g.Input,{type:"password",name:"password",value:u.password,onChange:x,placeholder:"Enter password (min 6 characters)",disabled:m,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Confirm Password"}),(0,b.jsx)(g.Input,{type:"password",name:"confirm_password",value:u.confirm_password,onChange:x,placeholder:"Confirm your password",disabled:m,required:!0})]})]}),2===s&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Phone Number"}),(0,b.jsx)(g.Input,{type:"tel",name:"phone",value:u.phone,onChange:x,placeholder:"Enter phone number",disabled:m,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"ID Number"}),(0,b.jsx)(g.Input,{type:"text",name:"id_number",value:u.id_number,onChange:x,placeholder:"Enter your ID number",disabled:m,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Emergency Contact Name"}),(0,b.jsx)(g.Input,{type:"text",name:"emergency_contact",value:u.emergency_contact,onChange:x,placeholder:"Enter emergency contact name",disabled:m,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Emergency Contact Phone"}),(0,b.jsx)(g.Input,{type:"tel",name:"emergency_contact_phone",value:u.emergency_contact_phone,onChange:x,placeholder:"Enter emergency contact phone",disabled:m,required:!0})]})]}),3===s&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Address"}),(0,b.jsx)(g.Input,{type:"text",name:"address",value:u.address,onChange:x,placeholder:"Enter your address",disabled:m,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"City"}),(0,b.jsx)(g.Input,{type:"text",name:"city",value:u.city,onChange:x,placeholder:"Enter city",disabled:m,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Country"}),(0,b.jsx)(g.Input,{type:"text",name:"country",value:u.country,onChange:x,placeholder:"Enter country",disabled:m,required:!0})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[s>1&&(0,b.jsxs)(f.Button,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{p(""),t(s-1)},disabled:m,children:[(0,b.jsx)(k,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,b.jsx)(f.Button,{type:"submit",className:`flex-1 ${3===s?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"} text-white font-medium`,disabled:m,children:m?"Processing...":3===s?"Register":"Next"})]})]}),(0,b.jsxs)("div",{className:"mt-6 text-center",children:[(0,b.jsx)("p",{className:"text-sm text-slate-600 mb-2",children:"Already have an account?"}),(0,b.jsx)(l.default,{href:"/login",className:"text-green-600 hover:text-green-700 text-sm font-medium",children:"Go to Login"})]})]})]})})}a.s(["default",()=>m],18414)}];

//# sourceMappingURL=_7df3d3e7._.js.map